<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Three.js Space Particles</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #000;
            overflow: hidden;
            font-family: 'Arial', sans-serif;
        }
        
        #container {
            width: 100vw;
            height: 100vh;
        }
        
        .controls {
            position: absolute;
            top: 20px;
            left: 20px;
            color: #fff;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 10px;
            font-size: 14px;
            z-index: 100;
        }
        
        .title {
            position: absolute;
            top: 20px;
            right: 20px;
            color: #fff;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            z-index: 100;
        }
    </style>
</head>
<body>
    <div id="container"></div>
    <div class="controls">
        <div>üñ±Ô∏è „Éû„Ç¶„Çπ: Ë¶ñÁÇπÂõûËª¢</div>
        <div>üñ±Ô∏è „Çπ„ÇØ„É≠„Éº„É´: „Ç∫„Éº„É†</div>
    </div>
    <div class="title">‚ú® ÂÆáÂÆô„Éë„Éº„ÉÜ„Ç£„ÇØ„É´ ‚ú®</div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        let scene, camera, renderer, particles, starField;
        let mouseX = 0, mouseY = 0;
        let windowHalfX = window.innerWidth / 2;
        let windowHalfY = window.innerHeight / 2;

        function init() {
            // „Ç∑„Éº„É≥„ÅÆ‰ΩúÊàê
            scene = new THREE.Scene();
            
            // „Ç´„É°„É©„ÅÆ‰ΩúÊàê
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 2000);
            camera.position.z = 1000;
            
            // „É¨„É≥„ÉÄ„É©„Éº„ÅÆ‰ΩúÊàê
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setClearColor(0x001122);
            document.getElementById('container').appendChild(renderer.domElement);
            
            // „Éë„Éº„ÉÜ„Ç£„ÇØ„É´„Ç∑„Çπ„ÉÜ„É†„ÅÆ‰ΩúÊàê
            createParticles();
            createStarField();
            
            // „Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº
            document.addEventListener('mousemove', onDocumentMouseMove, false);
            window.addEventListener('resize', onWindowResize, false);
            document.addEventListener('wheel', onMouseWheel, false);
            
            // „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ÈñãÂßã
            animate();
        }
        
        function createParticles() {
            const geometry = new THREE.BufferGeometry();
            const particleCount = 2000;
            
            const positions = new Float32Array(particleCount * 3);
            const colors = new Float32Array(particleCount * 3);
            const sizes = new Float32Array(particleCount);
            
            for (let i = 0; i < particleCount; i++) {
                const i3 = i * 3;
                
                // „É©„É≥„ÉÄ„É†„Å™‰ΩçÁΩÆ
                positions[i3] = (Math.random() - 0.5) * 2000;
                positions[i3 + 1] = (Math.random() - 0.5) * 2000;
                positions[i3 + 2] = (Math.random() - 0.5) * 2000;
                
                // „Çà„ÇäÊòé„Çã„Åè„Å¶Ë¶ã„ÇÑ„Åô„ÅÑËâ≤
                const colorOptions = [
                    new THREE.Color(0xff6b6b), // Êòé„Çã„ÅÑËµ§
                    new THREE.Color(0x4ecdc4), // „Çø„Éº„Ç≥„Ç§„Ç∫
                    new THREE.Color(0x45b7d1), // Êòé„Çã„ÅÑÈùí
                    new THREE.Color(0xf9ca24), // Êòé„Çã„ÅÑÈªÑËâ≤
                    new THREE.Color(0x6c5ce7), // Á¥´
                    new THREE.Color(0x00d2d3), // „Ç∑„Ç¢„É≥
                    new THREE.Color(0xff9ff3), // „Éî„É≥„ÇØ
                    new THREE.Color(0x54a0ff)  // „Çπ„Ç´„Ç§„Éñ„É´„Éº
                ];
                const color = colorOptions[Math.floor(Math.random() * colorOptions.length)];
                colors[i3] = color.r;
                colors[i3 + 1] = color.g;
                colors[i3 + 2] = color.b;
                
                // „Çà„ÇäÂ§ß„Åç„Å™„Çµ„Ç§„Ç∫
                sizes[i] = Math.random() * 8 + 3;
            }
            
            geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
            geometry.setAttribute('size', new THREE.BufferAttribute(sizes, 1));
            
            // „Ç∑„Çß„Éº„ÉÄ„Éº„Éû„ÉÜ„É™„Ç¢„É´
            const material = new THREE.ShaderMaterial({
                uniforms: {
                    time: { value: 0.0 }
                },
                vertexShader: `
                    attribute float size;
                    attribute vec3 color;
                    varying vec3 vColor;
                    uniform float time;
                    
                    void main() {
                        vColor = color;
                        vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
                        
                        // ÊôÇÈñì„Å´„Çà„ÇãÂãï„Åç
                        mvPosition.x += sin(time * 0.002 + position.y * 0.01) * 20.0;
                        mvPosition.y += cos(time * 0.003 + position.x * 0.01) * 15.0;
                        
                        gl_Position = projectionMatrix * mvPosition;
                        gl_PointSize = size * (300.0 / -mvPosition.z);
                    }
                `,
                fragmentShader: `
                    varying vec3 vColor;
                    
                    void main() {
                        float distance = length(gl_PointCoord - vec2(0.5, 0.5));
                        if (distance > 0.5) discard;
                        
                        float alpha = 1.0 - distance * 2.0;
                        gl_FragColor = vec4(vColor, alpha);
                    }
                `,
                transparent: true,
                blending: THREE.AdditiveBlending,
                vertexColors: true
            });
            
            particles = new THREE.Points(geometry, material);
            scene.add(particles);
        }
        
        function createStarField() {
            const starGeometry = new THREE.BufferGeometry();
            const starCount = 5000;
            const starPositions = new Float32Array(starCount * 3);
            
            for (let i = 0; i < starCount * 3; i++) {
                starPositions[i] = (Math.random() - 0.5) * 4000;
            }
            
            starGeometry.setAttribute('position', new THREE.BufferAttribute(starPositions, 3));
            
            const starMaterial = new THREE.PointsMaterial({
                color: 0xffffff,
                size: 2,
                transparent: true,
                opacity: 0.8
            });
            
            starField = new THREE.Points(starGeometry, starMaterial);
            scene.add(starField);
        }
        
        function onDocumentMouseMove(event) {
            mouseX = (event.clientX - windowHalfX) * 0.001;
            mouseY = (event.clientY - windowHalfY) * 0.001;
        }
        
        function onMouseWheel(event) {
            camera.position.z += event.deltaY * 0.5;
            camera.position.z = Math.max(100, Math.min(2000, camera.position.z));
        }
        
        function onWindowResize() {
            windowHalfX = window.innerWidth / 2;
            windowHalfY = window.innerHeight / 2;
            
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        
        function animate() {
            requestAnimationFrame(animate);
            
            const time = Date.now();
            
            // „Éë„Éº„ÉÜ„Ç£„ÇØ„É´„ÅÆÊôÇÈñìÊõ¥Êñ∞
            if (particles.material.uniforms) {
                particles.material.uniforms.time.value = time;
            }
            
            // „Ç´„É°„É©„ÅÆÂõûËª¢
            camera.position.x += (mouseX * 200 - camera.position.x) * 0.05;
            camera.position.y += (-mouseY * 200 - camera.position.y) * 0.05;
            camera.lookAt(scene.position);
            
            // „Éë„Éº„ÉÜ„Ç£„ÇØ„É´Áæ§„ÅÆÂõûËª¢
            particles.rotation.y = time * 0.0001;
            particles.rotation.x = time * 0.00005;
            
            // ÊòüÁ©∫„ÅÆÂæÆÂõûËª¢
            starField.rotation.y = time * 0.00002;
            
            renderer.render(scene, camera);
        }
        
        // ÂàùÊúüÂåñ
        init();
    </script>
</body>
</html> 
